---
title: "ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã™ã‚‹ä¸Šã§ç™ºç”Ÿã—ãŸãƒˆãƒ©ãƒ–ãƒ«"
emoji: "ğŸ˜½"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [selenium, chromedriver]
published: true
publication_name: "ka_projects"
---

## ã¯ã˜ã‚ã«

Selenium ã¨ ChromeDriver ã¯ã€ã‚¦ã‚§ãƒ–ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã«ãŠã„ã¦ä¸å¯æ¬ ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚Selenium ã¯ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ã®è‡ªå‹•æ“ä½œã‚’å¯èƒ½ã«ã—ã€ChromeDriver ã¯ Google Chrome ãƒ–ãƒ©ã‚¦ã‚¶ã‚’åˆ¶å¾¡ã™ã‚‹ãŸã‚ã®ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã¨ã—ã¦æ©Ÿèƒ½ã—ã¾ã™ã€‚æœ¬è¨˜äº‹ã§ã¯ã€ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•ã¨ã€å®Ÿéš›ã«é­é‡ã—ãŸãƒˆãƒ©ãƒ–ãƒ«ãŠã‚ˆã³ãã®è§£æ±ºç­–ã«ã¤ã„ã¦è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

## Selenium ã¨ ChromeDriver ã®ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã«ãŠã‘ã‚‹æ„ç¾©ã¨å½¹å‰²

### Selenium ã®å½¹å‰²

Selenium ã¯ã€ã‚¦ã‚§ãƒ–ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰æ“ä½œã™ã‚‹ãŸã‚ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã«ãŠã„ã¦ã¯ã€JavaScript ã§å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å–å¾—ã‚„ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã™ã‚‹éš›ã«éå¸¸ã«æœ‰ç”¨ã§ã™ã€‚å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªç”¨é€”ãŒã‚ã‚Šã¾ã™ï¼š

- **å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å–å¾—**: ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰å¾Œã« JavaScript ã§ç”Ÿæˆã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã€‚
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œã®è‡ªå‹•åŒ–**: ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã®å…¥åŠ›ã‚„ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯ãªã©ã€äººé–“ãŒè¡Œã†æ“ä½œã‚’è‡ªå‹•åŒ–ã€‚
- **ãƒ†ã‚¹ãƒˆã®è‡ªå‹•åŒ–**: ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚’è‡ªå‹•åŒ–ã€‚

### ChromeDriver ã®å½¹å‰²

ChromeDriver ã¯ã€Selenium ã¨ Google Chrome ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é€£æºã•ã›ã‚‹ãŸã‚ã®ãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã§ã™ã€‚Selenium ã¯ãƒ–ãƒ©ã‚¦ã‚¶ã®æ“ä½œã‚’æŒ‡ç¤ºã—ã¾ã™ãŒã€å®Ÿéš›ã®ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã¯ ChromeDriver ãŒæ‹…ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€Python ãªã©ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‹ã‚‰ Chrome ãƒ–ãƒ©ã‚¦ã‚¶ã‚’åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ç™ºç”Ÿã—ãŸãƒˆãƒ©ãƒ–ãƒ«ã¨ãã®å¯¾ç­–

### ã‚¨ãƒ©ãƒ¼ 1: `desired_capabilities` ãŒäºˆæœŸã›ã¬å¼•æ•°ã¨ã—ã¦æ¸¡ã•ã‚ŒãŸ

#### ç™ºç”ŸçŠ¶æ³

ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼š

```

TypeError: WebDriver.**init**() got an unexpected keyword argument 'desired_capabilities'

```

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€Selenium 4 ä»¥é™ã§`desired_capabilities`å¼•æ•°ãŒéæ¨å¥¨ã¨ãªã‚Šã€æ–°ã—ã„è¨­å®šæ–¹æ³•ãŒå¿…è¦ã«ãªã£ãŸãŸã‚ã«ç™ºç”Ÿã—ã¾ã—ãŸã€‚

#### è§£æ±ºç­–

`desired_capabilities`ã®ä»£ã‚ã‚Šã«ã€`Options`ã‚¯ãƒ©ã‚¹ã‚’ä½¿ç”¨ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‚’è¡Œã„ã¾ã™ã€‚ä»¥ä¸‹ã«ä¿®æ­£ä¾‹ã‚’ç¤ºã—ã¾ã™ã€‚

**ä¿®æ­£å‰ã®ã‚³ãƒ¼ãƒ‰ï¼š**

```python
from selenium import webdriver
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

def login():
    caps = DesiredCapabilities.CHROME.copy()
    caps["goog:loggingPrefs"] = {"performance": "ALL"}

    driver = webdriver.Chrome("/path/to/chromedriver", desired_capabilities=caps)
    # ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ç¶šè¡Œ...
```

**ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰ï¼š**

```python
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager

def login():
    options = Options()
    options.set_capability("goog:loggingPrefs", {"performance": "ALL"})

    # webdriver_managerã§ChromeDriverã‚’è‡ªå‹•ç®¡ç†
    service = Service(ChromeDriverManager().install())
    driver = webdriver.Chrome(service=service, options=options)
    # ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ç¶šè¡Œ...
```

**ä¸»ãªå¤‰æ›´ç‚¹ï¼š**

- `DesiredCapabilities`ã‹ã‚‰`Options`ã‚¯ãƒ©ã‚¹ã«å¤‰æ›´ã€‚
- `webdriver.Chrome`ã®å¼•æ•°ã«`desired_capabilities`ã‚’æ¸¡ã•ãšã€ä»£ã‚ã‚Šã«`options`ã‚’æ¸¡ã™ã€‚
- `webdriver_manager`ã‚’ä½¿ç”¨ã—ã¦ ChromeDriver ã‚’è‡ªå‹•çš„ã«ç®¡ç†ã€‚

### ã‚¨ãƒ©ãƒ¼ 2: `SessionNotCreatedException` - ChromeDriver ã¨ Chrome ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸ä¸€è‡´

#### ç™ºç”ŸçŠ¶æ³

ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼š

```
selenium.common.exceptions.SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 120
Current browser version is 131.0.6778.109 with binary path /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
```

ã“ã®ã‚¨ãƒ©ãƒ¼ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ ChromeDriver ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒã€ç¾åœ¨ä½¿ç”¨ã—ã¦ã„ã‚‹ Google Chrome ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ä¸€è‡´ã—ã¦ã„ãªã„ãŸã‚ã«ç™ºç”Ÿã—ã¾ã™ã€‚

#### è§£æ±ºç­–

ChromeDriver ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ Google Chrome ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«åˆã‚ã›ã¦æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚æ‰‹å‹•ã§ã®æ›´æ–°æ–¹æ³•ã‚’è©¦ã¿ã¾ã—ãŸãŒã€ã†ã¾ãã„ã‹ãªã‹ã£ãŸãŸã‚ã€`webdriver_manager`ã‚’åˆ©ç”¨ã—ã¦è‡ªå‹•çš„ã«é©åˆ‡ãªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã® ChromeDriver ã‚’ç®¡ç†ã™ã‚‹æ–¹æ³•ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸã€‚

**ä¿®æ­£å‰ã®ã‚³ãƒ¼ãƒ‰ï¼š**

```python
from selenium import webdriver
from selenium.webdriver.common.desired_capabilities import DesiredCapabilities

def login():
    caps = DesiredCapabilities.CHROME.copy()
    caps["goog:loggingPrefs"] = {"performance": "ALL"}

    driver = webdriver.Chrome("/opt/homebrew/bin/chromedriver", desired_capabilities=caps)
    # ãƒ­ã‚°ã‚¤ãƒ³å‡¦ç†ç¶šè¡Œ...
```

**ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰ï¼š**

```python
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager

def login():
    options = Options()
    options.set_capability("goog:loggingPrefs", {"performance": "ALL"})

    # webdriver_managerã§ChromeDriverã‚’è‡ªå‹•ç®¡ç†
    service = Service(ChromeDriverManager().install())
    driver = webdriver.Chrome(service=service, options=options)

    # ä»¥ä¸‹ã€ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã®ç¶šè¡Œ...
```

**ä¸»ãªå¤‰æ›´ç‚¹ï¼š**

- `webdriver_manager`ã‚’å°å…¥ã—ã€ChromeDriver ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚’è‡ªå‹•åŒ–ã€‚
- `webdriver.Chrome`ã®å¼•æ•°ã«ç›´æ¥ ChromeDriver ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã›ãšã€`Service`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆ©ç”¨ã€‚
- `webdriver_manager`ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Chrome ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«é©ã—ãŸ ChromeDriver ãŒè‡ªå‹•çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»è¨­å®šã•ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸã€‚

## webdriver_manager ã‚’ä½¿ã£ãŸ ChromeDriver ã®è‡ªå‹•ç®¡ç†

`webdriver_manager`ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€Selenium ã§ä½¿ç”¨ã™ã‚‹ ChromeDriver ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ç®¡ç†ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã®ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ã“ã‚Œã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€æ‰‹å‹•ã§ ChromeDriver ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ‰‹é–“ã‚’çœãã€å¸¸ã«æœ€æ–°ã®ãƒ–ãƒ©ã‚¦ã‚¶ã«å¯¾å¿œã—ãŸãƒ‰ãƒ©ã‚¤ãƒãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•

```bash
pip install webdriver_manager
```

### ä½¿ç”¨æ–¹æ³•

ä»¥ä¸‹ã¯ã€`webdriver_manager`ã‚’ä½¿ç”¨ã—ãŸ ChromeDriver ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ä¾‹ã§ã™ã€‚

```python
from selenium import webdriver
from selenium.webdriver.chrome.options import Options
from selenium.webdriver.chrome.service import Service
from webdriver_manager.chrome import ChromeDriverManager

def main():
    options = Options()
    options.set_capability("goog:loggingPrefs", {"performance": "ALL"})

    # ChromeDriverã‚’è‡ªå‹•çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒ»è¨­å®š
    service = Service(ChromeDriverManager().install())
    driver = webdriver.Chrome(service=service, options=options)

    # ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã®ä¾‹
    driver.get("https://www.google.com")
    print(driver.title)

    driver.quit()

if __name__ == "__main__":
    main()
```

**ãƒã‚¤ãƒ³ãƒˆï¼š**

- `ChromeDriverManager().install()`ãŒç¾åœ¨ã® Chrome ãƒ–ãƒ©ã‚¦ã‚¶ã«é©ã—ãŸ ChromeDriver ã‚’è‡ªå‹•çš„ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ãƒ‘ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚
- `Service`ã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚Šã€ChromeDriver ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ç®¡ç†ã—ã¾ã™ã€‚
- `webdriver.Chrome`ã®å¼•æ•°ã«`service`ã¨`options`ã‚’æ¸¡ã™ã“ã¨ã§ã€Selenium ã¨ ChromeDriver ãŒæ­£ã—ãé€£æºã—ã¾ã™ã€‚

ã“ã‚Œã«ã‚ˆã‚Šã€Chrome ãƒ–ãƒ©ã‚¦ã‚¶ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒæ›´æ–°ã•ã‚Œã¦ã‚‚ã€è‡ªå‹•çš„ã«å¯¾å¿œã™ã‚‹ ChromeDriver ãŒä½¿ç”¨ã•ã‚Œã‚‹ãŸã‚ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸ä¸€è‡´ã«ã‚ˆã‚‹ã‚¨ãƒ©ãƒ¼ã‚’é˜²ãã“ã¨ãŒã§ãã¾ã™ã€‚

## ãŠã¾ã‘: M1 Mac ã§ã®ã€Œchromedriver ãŒæ‚ªè³ªãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‹ã©ã†ã‹ã‚’ Apple ã§ã¯ç¢ºèªã§ããªã„ã€ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã®å¯¾å‡¦æ³•

### ç™ºç”ŸçŠ¶æ³

M1 Mac ã« ChromeDriver ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦å®Ÿè¡Œã—ãŸéš›ã«ã€ä»¥ä¸‹ã®ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼š

```
â€œchromedriverâ€ãŒæ‚ªè³ªãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‹ã©ã†ã‹ã‚’ Apple ã§ã¯ç¢ºèªã§ããªã„ãŸã‚ã€ã“ã®ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¯é–‹ã‘ã¾ã›ã‚“ã€‚
```

### å¯¾å¿œæ–¹æ³•

åˆå›ã®å®Ÿè¡Œæ™‚ã¯ã€ChromeDriver ã‚’è¨±å¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®æ‰‹é †ã§å¯¾å¿œã—ã¦ãã ã•ã„ï¼š

1. ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®šã‚’é–‹ã
   ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®šã‚’é–‹ãã€ã€Œã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã¨ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã€ã‚’é¸æŠã—ã¾ã™ã€‚
2. è¨±å¯ã‚’ã‚¯ãƒªãƒƒã‚¯
   ã€Œä¸€èˆ¬ã€ã‚¿ãƒ–å†…ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾ã—ã¦ã€ã€Œè¨±å¯ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚
3. ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã®ç¢ºèª
   å†åº¦ã€åŒã˜ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€å†åº¦ã€Œè¨±å¯ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

ã“ã‚Œã§ã€ChromeDriver ã®å®Ÿè¡ŒãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚

&nbsp;
&nbsp;
&nbsp;
&nbsp;
ä»¥ä¸Šã§ã™ã€‚
