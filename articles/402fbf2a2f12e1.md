---
title: "App Routerã¨Page Routerã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å·®åˆ†ã¾ã¨ã‚"
emoji: "ğŸ™†"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [nextjs, approuter, pagerouter]
published: true
published_at: 2024-11-27 9:00
---

## æœ¬è¨˜äº‹ã®ç›®çš„

2023 å¹´ã”ã‚ Next.js13 ãŒç™ºè¡¨ã•ã‚Œã€å¾“æ¥ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ©Ÿèƒ½ Page Router ã¨åˆ¥ã«ã€App Router ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚å…¬å¼ã¯ App Router ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã—ã€ç™ºè¡¨ã‹ã‚‰ 1 å¹´ä»¥ä¸ŠçµŒã£ã¦ã„ã¦å¾ã€…ã«è¨˜äº‹ã‚‚å¢—ãˆã¦ããŸã®ã§ã€æµçŸ³ã« App Router æ¡ç”¨ã«è¸ã¿åˆ‡ã£ã¦è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚

ã—ã‹ã—ã€App Router ã¯ã“ã‚Œã¾ã§ã® React ã‚„ Page Router ã«ã‚ˆã‚‹æ›¸ãæ–¹ã¨å¤§ããç•°ãªã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€React Server Componentsï¼ˆRSCï¼‰ ã¨ã„ã†ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãŒå°å…¥ã•ã‚Œã€é–‹ç™ºã®è€ƒãˆæ–¹ãŒå¤§ããå¤‰åŒ–ã—ãŸã‹ã‚‰ã§ã™ã€‚

ã“ã®è¨˜äº‹ã§ã¯ã€Next.js å®šç¾©ã‹ã‚‰ Page Router ã¨ App Router ã®å·®åˆ†ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®æ„ç¾©ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

## Next.js ã¨ã¯

Next.js ã¯ã€React ã®æ©Ÿèƒ½ã‚’æ‹¡å¼µã—ãŸå¼·åŠ›ãªã‚¦ã‚§ãƒ–é–‹ç™ºãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€‚

React ã¯ä¸»ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ï¼ˆUIï¼‰ã®æ§‹ç¯‰ã«ç‰¹åŒ–ã—ãŸ JavaScript ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ãŒã€Next.js ã¯ React ã®æ©Ÿèƒ½ã‚’åŸºç›¤ã¨ã—ã¤ã¤ã€ã‚ˆã‚ŠåŒ…æ‹¬çš„ãªé–‹ç™ºç’°å¢ƒã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚

å¤§ããªç‰¹å¾´ã¨ã—ã¦ã€ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°(ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ UI ã‚’ç”Ÿæˆã—è¡¨ç¤ºã™ã‚‹ä¸€é€£ã®å‡¦ç†)ã®æ–¹å¼ãŒã€SSR ã‚„ SSG ãªã©ã€æŸ”è»Ÿã«é¸æŠã§ãã‚‹ã¨ã„ã†ã“ã¨ã§ã™ã€‚ã“ã‚Œã«ã‚ˆã£ã¦ã€SEO å¯¾ç­–ã‚„ã€èª­ã¿è¾¼ã¿é€Ÿåº¦ãªã©ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã«ç¹‹ãŒã‚‹ã¨ã„ã†åˆ©ç‚¹ãŒã‚ã‚Šã¾ã™ã€‚

ã¾ãŸã€Node.js ã¨åå‰ãŒä¼¼ã¦ã„ã‚‹ã‹ã‚‰ã€ä»²é–“ã‹ã¨æ€ã‚ã‚Œã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€Node.js ã¯ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã® JavaScript å®Ÿè¡Œç’°å¢ƒã§ã‚ã‚Šã€Next.js ã¯ Node.js ä¸Šã§å‹•ä½œã™ã‚‹ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã™ã€‚

## App Router ã®æ„ç¾©

web ã‚¢ãƒ—ãƒªã‚’é–‹ç™ºã™ã‚‹ä¸Šã§ã€ç•°ãªã‚‹ãƒšãƒ¼ã‚¸ã‚„æ©Ÿèƒ½é–“ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆç§»å‹•ï¼‰ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒå‡ºã¦ãã¾ã™ã€‚ã“ã‚Œã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨è¨€ã„ã¾ã™ã€‚React+Vite ã®ã‚ˆã†ãªæ§‹æˆã§ web ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹å ´åˆã¯ã€React è‡ªä½“ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ©Ÿèƒ½ãŒå†…è”µã•ã‚Œã¦ã„ãªã„ãŸã‚ã€ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®Ÿç¾ã™ã‚‹ãŸã‚ã« React Router ãªã©ã®ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ Vue.js ã§ã‚‚åŒæ§˜ã§ã€è¨­å®šãŒã‚„ã‚„è¤‡é›‘ã§ã‚ã‚“ã©ã„ã§ã™ã€‚

Next.js ã§ã¯ã“ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æ„Ÿè¦šçš„ã«è¡Œã†ã“ã¨ã®ã§ãã‚‹æ©Ÿèƒ½ãŒå‚™ã‚ã£ã¦ã„ã¾ã™ã€‚å¾“æ¥ã® Page Router ã¨æ–°ã—ãè¿½åŠ ã•ã‚ŒãŸ App Router ã§ã™ã€‚ã©ã¡ã‚‰ã‚‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã§ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ç‚¹ã¯åŒã˜ã§ã™ãŒã€App Router ã¯ Page Router ã‚ˆã‚Šã‚‚è¤‡é›‘ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šãŒå¯èƒ½ã«ãªã‚Šã¾ã—ãŸã€‚

## App Router ã¨ Page Router ã®é•ã„

Page Router ã§ã‚‚ä½¿ãˆãŸå¾“æ¥ã®æ©Ÿèƒ½ã¯ã€App Router ã§ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰åŒ–ã—ã¾ã—ãŸã€‚

### Page Router

```ruby
/pages
  â”œâ”€â”€ index.js           // `/`
  â”œâ”€â”€ about.js           // `/about`
  â”œâ”€â”€ blog/
  â”‚   â”œâ”€â”€ index.js       // `/blog`
  â”‚   â”œâ”€â”€ [...slug].js   // `/docs/*` ã«å¯¾å¿œ
  â”‚   â””â”€â”€ [id].js        // `/blog/:id`
  â”œâ”€â”€ _app.js            // å…¨ä½“ã®å…±é€šãƒ­ã‚¸ãƒƒã‚¯ã€‚ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¨ã‹
  â”œâ”€â”€ _document.js       // HTMLã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
  â”œâ”€â”€ api/
  â”‚   â””â”€â”€ hello.js       // `/api/hello`
```

### App Router

```ruby
/app
  â”œâ”€â”€ layout.js          // å…¨ä½“ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
  â”œâ”€â”€ page.js            // `/`
  â”œâ”€â”€ about/
  â”‚   â””â”€â”€ page.js        // `/about`
  â”œâ”€â”€ blog/
  â”‚   â”œâ”€â”€ layout.js      // `/blog` ä»¥ä¸‹ã®å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
  â”‚   â”œâ”€â”€ page.js        // `/blog`
  â”‚   â”œâ”€â”€ [...slug]/
  â”‚   â”‚   â””â”€â”€ page.js    // `/docs/*`
  â”‚   â””â”€â”€ [id]/
  â”‚       â””â”€â”€ page.js    // `/blog/:id`
  â”œâ”€â”€ api/
      â””â”€â”€ hello/route.js // `/api/hello`
```

&nbsp;
&nbsp;

ã•ã‚‰ã« App Router ã«ã¯ã“ã‚Œã«åŠ ãˆã¦ã€æ¬¡ã® 4 é …ç›®ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚

#### 1. ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ã‚­ãƒ£ãƒƒãƒã‚ªãƒ¼ãƒ«ï¼ˆ`[[...param]]`ï¼‰

```ruby
/app
  â”œâ”€â”€ search/
  â”‚   â”œâ”€â”€ [[...filters]]/
  â”‚       â””â”€â”€ page.js          // `/search` ã¾ãŸã¯ `/search/*` (æ¤œç´¢ãƒšãƒ¼ã‚¸)
```

- ä¾‹
  - `/search`
  - `/search/category/react`
- å¿…é ˆã§ã¯ãªã„ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«å¯¾å¿œã™ã‚‹éš›ã«ä¾¿åˆ©

#### 2. ã‚»ã‚°ãƒ¡ãƒ³ãƒˆã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆ`(segment)`ï¼‰

```ruby
/app
  â”œâ”€â”€ (auth)/
  â”‚   â”œâ”€â”€ login/
  â”‚   â”‚   â””â”€â”€ page.js          // `/login` (ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸)
  â”‚   â”œâ”€â”€ register/
  â”‚       â””â”€â”€ page.js          // `/register` (æ–°è¦ç™»éŒ²ãƒšãƒ¼ã‚¸)
  â”œâ”€â”€ (marketing)/
  â”‚   â”œâ”€â”€ home/
  â”‚   â”‚   â””â”€â”€ page.js          // `/home` (ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ãƒ›ãƒ¼ãƒ )
  â”‚   â”œâ”€â”€ pricing/
  â”‚       â””â”€â”€ page.js          // `/pricing` (ä¾¡æ ¼æƒ…å ±ãƒšãƒ¼ã‚¸)
```

- `(auth)` ã‚„ `(marketing)` ã¯ URL ã«å«ã¾ã‚Œãªã„ã€‚ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ã—ãŸã„ã‘ã©ã€URL ã«ã¯å¹²æ¸‰ã—ãŸããªã„ãªã¨ã„ã†æ™‚ã«ä¾¿åˆ©

#### 3. ãƒ‘ãƒ©ãƒ¬ãƒ«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ï¼ˆ`@parallel`ï¼‰

```ruby
/app
  â”œâ”€â”€ dashboard/
  â”‚   â”œâ”€â”€ layout.js
  â”‚   â”œâ”€â”€ @analytics/
  â”‚   â”‚   â””â”€â”€ page.js  // `/dashboard` ã®ä¸€éƒ¨ã«å«ã¾ã‚Œã‚‹
  â”‚   â”œâ”€â”€ @settings/
  â”‚       â””â”€â”€ page.js  // `/dashboard` ã®ä¸€éƒ¨ã«å«ã¾ã‚Œã‚‹
```

- `layout.js`å†…ã§å—ã‘å–ã‚‹ç‰¹å®šã®ã‚­ãƒ¼ï¼ˆä¾‹: `@analytics` ã‚„ `@settings`ï¼‰ã«ã‚ˆã£ã¦ã€ãã‚Œãã‚Œã®ãƒ«ãƒ¼ãƒˆãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
- `layout.js`ãŒä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã®å ´åˆã€

  ```ruby
  import { useSearchParams } from "next/navigation";

  export default function DashboardLayout({ analytics, settings, children }) {
    const searchParams = useSearchParams();
    const view = searchParams.get("view");

    return (
      <div>
        <nav>
          <ul>
            <li><a href="/dashboard">Overview</a></li>
            <li><a href="/dashboard?view=analytics">Analytics</a></li>
            <li><a href="/dashboard?view=settings">Settings</a></li>
          </ul>
        </nav>

        <main>
          {view === "analytics" && analytics}
          {view === "settings" && settings}
          {!view && children}
        </main>
      </div>
    );
  }
  ```

  - **`/dashboard`**: `layout.js` ã¨ `page.js` ãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ“ãƒ¥ãƒ¼ï¼‰
  - **`/dashboard?view=analytics`**: `layout.js` å†…ã§ `@analytics/page.js` ãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹
  - **`/dashboard?view=settings`**: `layout.js` å†…ã§ `@settings/page.js` ãŒãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹

- åŒã˜ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§è¤‡æ•°ã®ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿç¾ã—ãŸã„ã¨ãã«ä¾¿åˆ©

#### 4. ç‰¹æ®Šãƒ•ã‚¡ã‚¤ãƒ«

```ruby
/app
  â”œâ”€â”€ error.js                 // ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ (å…¨ä½“ã§å…±æœ‰)
  â”œâ”€â”€ loading.js               // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º (å…¨ä½“ã§å…±æœ‰)
  â”œâ”€â”€ not-found.js             // 404ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ (å…¨ä½“ã§å…±æœ‰)
  â”œâ”€â”€ dashboard/
  â”‚   â”œâ”€â”€ layout.js            // `/dashboard` (å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ)
  â”‚   â”œâ”€â”€ page.js              // `/dashboard`
  â”‚   â”œâ”€â”€ error.js             // `/dashboard`å°‚ç”¨ã®ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸
  â”‚   â”œâ”€â”€ loading.js           // `/dashboard`å°‚ç”¨ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  â”‚   â”œâ”€â”€ analytics/
  â”‚   â”‚   â””â”€â”€ page.js          // `/dashboard/analytics` (ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ãƒšãƒ¼ã‚¸)
```

## ã¾ã¨ã‚

ä»¥ä¸Šã‚’ã¾ã¨ã‚ã‚‹ã¨ã€App Router ã§ã§ãã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®å…¨å®¹ã¯ä»¥ä¸‹ã®é€šã‚Šã€‚

```ruby
/app
  â”œâ”€â”€ page.js                  // `/` (ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸)
  â”œâ”€â”€ about/
  â”‚   â””â”€â”€ page.js              // `/about`
  â”œâ”€â”€ blog/
  â”‚   â”œâ”€â”€ page.js              // `/blog`
  â”‚   â”œâ”€â”€ [id]/
  â”‚   â”‚   â””â”€â”€ page.js          // `/blog/:id`
  â”‚   â””â”€â”€ [id]/
  â”‚       â””â”€â”€ edit/
  â”‚           â””â”€â”€ page.js      // `/blog/:id/edit`
  â”œâ”€â”€ dashboard/
  â”‚   â”œâ”€â”€ layout.js            // `/dashboard` (å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ)
  â”‚   â”œâ”€â”€ page.js              // `/dashboard`
  â”‚   â”œâ”€â”€ error.js             // `/dashboard`å°‚ç”¨ã®ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸
  â”‚   â”œâ”€â”€ loading.js           // `/dashboard`å°‚ç”¨ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  â”‚
  â”œâ”€â”€ docs/
  â”‚   â”œâ”€â”€ page.js              // `/docs`
  â”‚   â”œâ”€â”€ [...slug]/
  â”‚       â””â”€â”€ page.js          // `/docs/*`
  â”œâ”€â”€ search/
  â”‚   â”œâ”€â”€ [[...filters]]/
  â”‚       â””â”€â”€ page.js          // `/search` ã¾ãŸã¯ `/search/*`
  â”œâ”€â”€ (auth)/
  â”‚   â”œâ”€â”€ login/
  â”‚   â”‚   â””â”€â”€ page.js          // `/login`
  â”‚   â”œâ”€â”€ register/
  â”‚       â””â”€â”€ page.js          // `/register`
  â”œâ”€â”€ (marketing)/
  â”‚   â”œâ”€â”€ home/
  â”‚   â”‚   â””â”€â”€ page.js          // `/home`
  â”‚   â”œâ”€â”€ pricing/
  â”‚       â””â”€â”€ page.js          // `/pricing`
  â”œâ”€â”€ error.js                 // ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ (å…¨ä½“ã§å…±æœ‰)
  â”œâ”€â”€ loading.js               // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º (å…¨ä½“ã§å…±æœ‰)
  â”œâ”€â”€ not-found.js             // 404ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ (å…¨ä½“ã§å…±æœ‰)
  â”œâ”€â”€ dashboard/
  â”‚   â”œâ”€â”€ layout.js            // `/dashboard` (å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ)
  â”‚   â”œâ”€â”€ error.js             // `/dashboard`å°‚ç”¨ã®ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸
  â”‚   â”œâ”€â”€ loading.js           // `/dashboard`å°‚ç”¨ã®ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
  â”‚   â”œâ”€â”€ page.js              // `/dashboard`
  â”‚   â”œâ”€â”€ @analytics/
  â”‚   â”‚   â””â”€â”€ page.js          // `/dashboard`ã®ã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ãƒ“ãƒ¥ãƒ¼
  â”‚   â”œâ”€â”€ @settings/
  â”‚       â””â”€â”€ page.js          // `/dashboard`ã®è¨­å®šãƒ“ãƒ¥ãƒ¼

```

ã“ã‚Œã«ã‚ˆã‚Šã€

- é–‹ç™ºè€…ç›®ç·š â†’ ã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã©ã“ã«ã‚ã‚‹ã®ã‹ç›´æ„Ÿçš„ã§ã‚ã‹ã‚Šã‚„ã™ã„ï¼
- åˆ©ç”¨è€…ç›®ç·š â†’url ãŒç›´æ„Ÿçš„ã§ã‚ã‹ã‚Šã‚„ã™ã„ï¼

ã¨åŒæ–¹è‰¯ã—ã«ãªã‚‹ã¨ã„ã†å¯¸æ³•ã§ã™ã€‚

&nbsp;
&nbsp;
&nbsp;
&nbsp;
ä»¥ä¸Šã§ã™ã€‚
